import React, { useEffect } from "react";
import { motion, AnimatePresence } from "framer-motion";

const Toast = ({ message, type = "info", duration = 3000, onClose }) => {
  const typeStyles = {
    success: "text-green-800",
    error: "text-red-800",
    warning: "text-yellow-800",
    info: "text-blue-800",
  };

  const progressStyle = {
    success: "bg-green-500",
    error: "bg-red-500",
    warning: "bg-yellow-500",
    info: "bg-blue-500",
  };

  useEffect(() => {
    const timer = setTimeout(() => onClose(), duration);
    return () => clearTimeout(timer);
  }, [duration, onClose]);

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -20 }}
      className={`fixed bottom-5 right-5 flex items-center gap-4 px-4 py-2 pt-3 rounded shadow-md w-72 shadow-gray-600/10 z-20 ${typeStyles[type]} bg-white`}
    >
      <motion.div
        initial={{ width: "0%" }}
        animate={{ width: "100%" }}
        transition={{ duration: duration / 1000, ease: "linear" }}
        className={`absolute top-0 left-0 h-1 ${progressStyle[type]}`}
      />
      {type == "success" && (
        <svg height="25px" width="25px" viewBox="0 0 512 512">
          <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
          <g id="SVGRepo_tracerCarrier"></g>
          <g id="SVGRepo_iconCarrier">
            {" "}
            <g transform="translate(1 1)">
              {" "}
              <path
                fill="#dcfce7"
                d="M511,255c0,130.844-106.193,237.037-237.037,237.037S36.926,385.844,36.926,255 S143.119,17.963,273.963,17.963S511,124.156,511,255"
              ></path>{" "}
              <path
                fill="#86efac"
                d="M482.556,255c0,130.844-106.193,237.037-237.037,237.037S8.481,385.844,8.481,255 S114.674,17.963,245.519,17.963S482.556,124.156,482.556,255"
              ></path>{" "}
              <path
                fill="#dcfce7"
                d="M454.111,255c0,130.844-92.919,237.037-208.593,237.037S36.926,385.844,36.926,255 S130.793,17.963,245.519,17.963S454.111,124.156,454.111,255"
              ></path>{" "}
              <path
                fill="#FFFFFF"
                d="M36.926,255c0-130.844,93.867-237.037,208.593-237.037C114.674,17.963,8.481,124.156,8.481,255 s106.193,237.037,237.037,237.037C130.793,492.037,36.926,385.844,36.926,255"
              ></path>{" "}
              <g>
                {" "}
                <path
                  fill="#22c55e"
                  d="M245.519,501.519C109.933,501.519-1,390.585-1,255S109.933,8.481,245.519,8.481 S492.037,119.415,492.037,255S381.104,501.519,245.519,501.519z M245.519,27.444c-125.156,0-227.556,102.4-227.556,227.556 s102.4,227.556,227.556,227.556S473.074,380.156,473.074,255S370.674,27.444,245.519,27.444z"
                ></path>{" "}
                <path
                  fill="#22c55e"
                  d="M217.074,340.333c-1.896,0-3.793-0.948-5.689-1.896l-94.815-75.852 c-3.793-2.844-4.741-9.481-1.896-13.274s9.481-4.741,13.274-1.896l88.178,70.163l146.015-164.03 c3.793-3.793,9.481-4.741,13.274-0.948s4.741,9.481,0.948,13.274L224.659,336.541 C222.763,339.385,219.919,340.333,217.074,340.333z"
                ></path>{" "}
              </g>{" "}
            </g>{" "}
          </g>
        </svg>
      )}
      {type == "error" && (
        <svg height="25px" width="25px" viewBox="0 0 512 512">
          <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
          <g id="SVGRepo_tracerCarrier"></g>
          <g id="SVGRepo_iconCarrier">
            {" "}
            <g transform="translate(1)">
              {" "}
              <path
                fill="#fee2e2"
                d="M511,246.519c0,130.844-106.193,237.037-237.037,237.037S36.926,377.363,36.926,246.519 S143.119,9.481,273.963,9.481S511,115.674,511,246.519"
              ></path>{" "}
              <path
                fill="#fca5a5"
                d="M482.556,246.519c0,130.844-106.193,237.037-237.037,237.037S8.481,377.363,8.481,246.519 S114.674,9.481,245.519,9.481S482.556,115.674,482.556,246.519"
              ></path>{" "}
              <path
                fill="#fee2e2"
                d="M454.111,246.519c0,130.844-92.919,237.037-208.593,237.037S36.926,377.363,36.926,246.519 S130.793,9.481,245.519,9.481S454.111,115.674,454.111,246.519"
              ></path>{" "}
              <path
                fill="#FFFFFF"
                d="M36.926,246.519c0-130.844,93.867-237.037,208.593-237.037 C114.674,9.481,8.481,115.674,8.481,246.519s106.193,237.037,237.037,237.037C130.793,483.556,36.926,377.363,36.926,246.519"
              ></path>{" "}
              <g>
                {" "}
                <path
                  fill="#ef4444"
                  d="M245.519,502.519C109.933,502.519-1,391.585-1,256S109.933,9.481,245.519,9.481 S492.037,120.415,492.037,256S381.104,502.519,245.519,502.519z M245.519,28.444c-125.156,0-227.556,102.4-227.556,227.556 s102.4,227.556,227.556,227.556S473.074,381.156,473.074,256S370.674,28.444,245.519,28.444z"
                ></path>{" "}
                <path
                  fill="#ef4444"
                  d="M160.185,350.815c-2.844,0-4.741-0.948-6.637-2.844c-3.793-3.793-3.793-9.481,0-13.274 L324.215,164.03c3.793-3.793,9.481-3.793,13.274,0c3.793,3.793,3.793,9.481,0,13.274L166.822,347.97 C164.926,349.867,163.03,350.815,160.185,350.815z"
                ></path>{" "}
                <path
                  fill="#ef4444"
                  d="M330.852,350.815c-2.844,0-4.741-0.948-6.637-2.844L153.548,177.304 c-3.793-3.793-3.793-9.481,0-13.274c3.793-3.793,9.481-3.793,13.274,0l170.667,170.667c3.793,3.793,3.793,9.481,0,13.274 C335.593,349.867,333.696,350.815,330.852,350.815z"
                ></path>{" "}
              </g>{" "}
            </g>{" "}
          </g>
        </svg>
      )}
      {type == "warning" && (
        <svg height="25px" width="25px" viewBox="0 0 512 512">
          <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
          <g id="SVGRepo_tracerCarrier"></g>
          <g id="SVGRepo_iconCarrier">
            {" "}
            <g transform="translate(1 1)">
              {" "}
              <path
                fill="#fef9c3"
                d="M511,255c0,130.844-106.193,237.037-237.037,237.037S36.926,385.844,36.926,255 S143.119,17.963,273.963,17.963S511,124.156,511,255"
              ></path>{" "}
              <path
                fill="#fde047"
                d="M482.556,255c0,130.844-106.193,237.037-237.037,237.037S8.481,385.844,8.481,255 S114.674,17.963,245.519,17.963S482.556,124.156,482.556,255"
              ></path>{" "}
              <path
                fill="#fef9c3"
                d="M454.111,255c0,130.844-92.919,237.037-208.593,237.037S36.926,385.844,36.926,255 S130.793,17.963,245.519,17.963S454.111,124.156,454.111,255"
              ></path>{" "}
              <path
                fill="#FFFFFF"
                d="M36.926,255c0-130.844,93.867-237.037,208.593-237.037C114.674,17.963,8.481,124.156,8.481,255 s106.193,237.037,237.037,237.037C130.793,492.037,36.926,385.844,36.926,255"
              ></path>{" "}
              <g>
                {" "}
                <path
                  fill="#eab308"
                  d="M245.519,501.519C109.933,501.519-1,390.585-1,255S109.933,8.481,245.519,8.481 S492.037,119.415,492.037,255S381.104,501.519,245.519,501.519z M245.519,27.444c-125.156,0-227.556,102.4-227.556,227.556 s102.4,227.556,227.556,227.556S473.074,380.156,473.074,255S370.674,27.444,245.519,27.444z"
                ></path>{" "}
                <path
                  fill="#eab308"
                  d="M245.519,330.852c-5.689,0-9.481-3.793-9.481-9.482V112.778c0-5.689,3.793-9.481,9.481-9.481 c5.689,0,9.481,3.793,9.481,9.481V321.37C255,327.059,251.207,330.852,245.519,330.852z"
                ></path>{" "}
                <path
                  fill="#eab308"
                  d="M245.519,397.222c-5.689,0-9.481-3.793-9.481-9.481v-18.963c0-5.689,3.793-9.481,9.481-9.481 c5.689,0,9.481,3.793,9.481,9.481v18.963C255,393.43,251.207,397.222,245.519,397.222z"
                ></path>{" "}
              </g>{" "}
            </g>{" "}
          </g>
        </svg>
      )}
      {type == "info" && (
        <svg height="25px" width="25px" viewBox="0 0 512 512">
          <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>
          <g id="SVGRepo_tracerCarrier"></g>
          <g id="SVGRepo_iconCarrier">
            {" "}
            <g transform="translate(1 1)">
              {" "}
              <path
                fill="#dbeafe"
                d="M511,255c0,130.844-106.193,237.037-237.037,237.037S36.926,385.844,36.926,255 S143.119,17.963,273.963,17.963S511,124.156,511,255"
              ></path>{" "}
              <path
                fill="#93c5fd"
                d="M482.556,255c0,130.844-106.193,237.037-237.037,237.037S8.481,385.844,8.481,255 S114.674,17.963,245.519,17.963S482.556,124.156,482.556,255"
              ></path>{" "}
              <path
                fill="#dbeafe"
                d="M454.111,255c0,130.844-92.919,237.037-208.593,237.037S36.926,385.844,36.926,255 S130.793,17.963,245.519,17.963S454.111,124.156,454.111,255"
              ></path>{" "}
              <path
                fill="#FFFFFF"
                d="M36.926,255c0-130.844,93.867-237.037,208.593-237.037C114.674,17.963,8.481,124.156,8.481,255 s106.193,237.037,237.037,237.037C130.793,492.037,36.926,385.844,36.926,255"
              ></path>{" "}
              <g>
                {" "}
                <path
                  fill="#3b82f6"
                  d="M245.519,501.519C109.933,501.519-1,390.585-1,255S109.933,8.481,245.519,8.481 S492.037,119.415,492.037,255S381.104,501.519,245.519,501.519z M245.519,27.444c-125.156,0-227.556,102.4-227.556,227.556 s102.4,227.556,227.556,227.556S473.074,380.156,473.074,255S370.674,27.444,245.519,27.444z"
                ></path>{" "}
                <path
                  fill="#3b82f6"
                  d="M245.519,397.222c-5.689,0-9.481-3.793-9.481-9.481v-18.963c0-5.689,3.793-9.481,9.481-9.481 c5.689,0,9.481,3.793,9.481,9.481v18.963C255,393.43,251.207,397.222,245.519,397.222z"
                ></path>{" "}
                <path
                  fill="#3b82f6"
                  d="M245.519,330.852c-5.689,0-9.481-3.793-9.481-9.482v-26.548c0-32.237,15.17-60.681,39.822-76.8 c17.067-10.43,26.548-28.444,26.548-48.356c0-30.341-26.548-55.941-55.941-55.941c-15.17,0-29.393,5.689-40.77,16.119 c-11.378,10.43-17.067,24.652-17.067,39.822c0,5.689-3.793,9.481-9.481,9.481s-9.481-3.793-9.481-9.481 c0-20.859,7.585-39.822,22.756-54.044c14.222-14.222,33.185-21.807,54.044-21.807c40.77,0.948,73.956,34.133,74.904,74.904 c0,26.548-12.326,50.252-35.081,64.474C266.378,245.519,255,269.222,255,293.874v27.496 C255,327.059,251.207,330.852,245.519,330.852z"
                ></path>{" "}
              </g>{" "}
            </g>{" "}
          </g>
        </svg>
      )}
      <span className="font-semibold text-sm">{message}</span>
    </motion.div>
  );
};

export default Toast;
